{% extends 'base.html' %}
{% block  contenu %}
    {% load static %}
    {% load filters %}

    <div class="entête">
        {% include 'dashboard.html' %}

        <div class="container ">
            <ul class="nav nav-tabs align-content-center" role="tablist">
                <li class="nav-item  px-3">
                    <a class="nav-link {% if  '/liste' in request.path %}active{% endif %}"
                       href="{% url 'listTache' %}">Tâches</a>
                </li>
                <li class="nav-item px-3">
                    <a class="nav-link {% if  '/calendrier' in request.path %}active{% endif %} "
                       href="{% url 'listTacheCal' %}">Calendrier</a>
                </li>
            </ul>
        </div>
    </div>
    <br>
    <br>
    <!-- Taches -->
    {% for tache in Tache %}
        <div class="container">
            <div class="card">
                <div class="card-header">
                    <div class="row">
                        <div class="col-sm-3">
                            Priorité :
                            {% if tache.niveauPriorite == '0' %}
                                <span class="badge badge-pill badge-light">Aucune</span>
                            {% endif %}
                            {% if tache.niveauPriorite == '1' %}
                                <span class="badge badge-pill badge-success">Faible</span>
                            {% endif %}
                            {% if tache.niveauPriorite == '2' %}
                                <span class="badge badge-pill badge-warning">Moyenne</span>
                            {% endif %}
                            {% if tache.niveauPriorite == '3' %}
                                <span class="badge badge-pill badge-danger">Forte</span>
                            {% endif %}
                        </div>
                        <div class="col-sm-7">
                            <h4>{{ tache.nomTache }}</h4>
                        </div>
                        <div class="=col-sm-2">
                            {% retard tache.dateFin as bool %}
                            {% if bool %}
                                <div class="alert-danger">
                                    Cette tâche est en retard !
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <!-- description et dates -->
                    <div class="row">
                        <div class="col-8">
                            <p class="card-text">Description : {{ tache.description }}</p>
                        </div>
                        <div class="col-1">
                            Début
                            <br>
                            Fin
                            <br>
                            Rappel
                        </div>
                        <div class="col-1">
                            <img class="iconeadmin" alt="debut" src="{% static 'img/date.png' %}">
                            <br>
                            <img class="iconeadmin" alt="fin" src="{% static 'img/dateend.png' %}">
                            <br>
                            <img class="iconeadmin" alt="rappel" src="{% static 'img/alerte.png' %}">
                        </div>
                        <div class="col-2">
                            {{ tache.dateDebut }}
                            <br>
                            {{ tache.dateFin }}
                            <br>
                            {{ tache.dateRappel }}
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-4">
                            <a>
                                <img class="iconeadmin" alt="responsable" src="{% static 'img/person.svg' %}">
                                responsable : {{ tache.fk_benevole.prenom }} {{ tache.fk_benevole.nom }}
                            </a>
                        </div>
                        <div class="col-6">
                            {% if tache.niveauAvancement == 'P' %}
                                <div class="progress">
                                    <div class="progress-bar bg-danger" role="progressbar" style="width: 25%"
                                         aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"> Plannifié
                                    </div>
                                </div>
                            {% endif %}
                            {% if tache.niveauAvancement == 'E' %}
                                <div class="progress">
                                    <div class="progress-bar bg-info" role="progressbar" style="width: 75%"
                                         aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"> En cours
                                    </div>
                                </div>
                            {% endif %}
                            {% if tache.niveauAvancement == 'V' %}
                                <div class="progress">
                                    <div class="progress-bar bg-success" role="progressbar" style="width: 100%"
                                         aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"> Terminé
                                    </div>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-8">

                        </div>
                        <div class="col-2">
                            <a href="{% url 'editerTache' tache.id %}" class="btn btn-primary">Modifier</a>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    {% endfor %}

    <!-- Fin Stock-->

    <!-- Bouton Plus pour ajouter un Benevole -->

    <span class="plus"></span>

    <!-- Pagination -->

    <div class="container">
        <div class="row">
            <div class="col-lg-6 offset-lg-3 py-5 d-flex">
                <ul class="pagination mx-auto">
                    <div class="pagination">
                        <span class="step-links">
                            {% if Tache.has_previous %}
                                <a href="?page={{ Tache.previous_page_number }}">Precèdent</a>
                            {% endif %}
                            <span class="current">
                                Page {{ Stock.number }} de {{ Tache.paginator.num_pages }}.
                            </span>
                            {% if Tache.has_next %}
                                <a href="?page={{ Tache.next_page_number }}">Suivant</a>
                            {% endif %}
                         </span>
                    </div>
                </ul>
            </div>
        </div>
    </div>

    <!-- Fin pagination -->


    {% include "tache/modalAjoutTache.html" %}

{% endblock %}